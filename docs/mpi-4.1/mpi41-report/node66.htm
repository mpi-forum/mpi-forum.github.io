<!DOCTYPE html>
<html lang=en>
<head>
<!-- This file was generated by tohtml from chap-pt2pt/pt2pt-rendered -->
<!-- with the command
tohtml -default -numbers -dosnl -htables -quietlatex -allgif -endpage mpi4-forum-tail.htm -Wnoredef --mpidoc --latexpgm pdflatex --indexfile mpi41-report-html.idx -basedef mpi4defs.txt -o mpi41-report.tex mpi-report.tex 
-->
<title>Data Conversion</title>
</head>
<body style="background-color:#FFFFFF">
<hr><h2><span id="Node66">4.3.2. Data Conversion</span></h2>
<a href="node64.htm#Node65"><img width=16 height=16 src="previous.gif" alt="Previous"></a><a href="node63.htm#Node63"><img width=16 height=16 src="up.gif" alt="Up"></a><a href="node67.htm#Node67"><img width=16 height=16 src="next.gif" alt="Next"></a><br>
<b>Up: </b><a href="node63.htm#Node63"> Datatype Matching and Data Conversion</a>
<b>Next: </b><a href="node67.htm#Node67"> Communication Modes</a>
<b>Previous: </b><a href="node64.htm#Node65"> Type <font face="sans-serif"> MPI_CHARACTER</font></a>
<p>
  
  
  
  
<P> 
One of the goals of <font face="sans-serif"> MPI</font> is to support parallel computations across  
heterogeneous environments.  Communication in a heterogeneous  
environment may require data conversions.  
We use the following terminology.  
<dl> 
 
<dt> 
<b>type conversion</b><dd> 
 changes the datatype of a value, e.g., by rounding a  
<tt> REAL</tt> to an <tt> INTEGER</tt>.  
 
<dt> 
<b>representation conversion</b><dd> 
 changes the binary representation of a value,  
e.g., from Hex floating point to IEEE floating point.  
</dl> 
<br> 
The type matching rules imply that <font face="sans-serif"> MPI</font> communication never entails type  
conversion.  On the other hand, <font face="sans-serif"> MPI</font> requires that a representation  
conversion be  
performed when a typed value is transferred across environments that use  
different representations for the datatype of this value.  
<font face="sans-serif"> MPI</font> does not specify rules for representation conversion.  Such conversion is  
expected to preserve integer, logical and character values, and to  
convert a floating point value to the nearest value that can be  
represented on the target system.  
<P> 
Overflow and underflow exceptions may occur during floating point conversions.  
Conversion of integers or characters may also lead to exceptions when a value  
that can be represented in one system cannot be represented in the other  
system.  An exception  
occurring during representation conversion results in a failure of the  
communication. An error occurs either in the send operation, or the receive  
operation, or both.  
<P> 
If a value sent in a message is untyped (i.e., of type <font face="sans-serif"> MPI_BYTE</font>),  
then the binary representation of the byte stored at the receiver is  
identical to the binary representation of the byte loaded at the sender.  This  
holds true, whether sender and receiver run in the same or in distinct  
environments. No representation conversion is required.  
(Note that representation conversion may  
occur when values of type <font face="sans-serif"> MPI_CHARACTER</font> or  
<font face="sans-serif"> MPI_CHAR</font> are transferred, for example, from an  
EBCDIC encoding to an ASCII encoding.)  
<P> 
No conversion need occur when an <font face="sans-serif"> MPI</font> program executes in  
a homogeneous system, where all <font face="sans-serif"> MPI</font> processes run in the same environment.  
<P> 
Consider the three examples, <a href="node64.htm#Node64">Type Matching Rules</a>--<a href="node64.htm#Node64">Type Matching Rules</a>.  
The first program is correct, assuming that <tt>a</tt> and <tt>b</tt> are  
<tt> REAL</tt> arrays of size <img width=43 height=18 src="img14.gif" alt="Image file">
.  
If the sender and receiver execute in different environments,  
then the ten real values that are fetched from the send buffer will  
be converted to the representation for reals on the receiver site  
before they are stored in the receive buffer.  While the  
number of real elements fetched from the send buffer equal the  
number of real elements stored in the receive buffer, the number of  
bytes stored need not equal the number of bytes loaded. For example, the  
sender may use a four byte representation and the receiver an eight  
byte representation for reals.  
<P> 
The second program is <em> erroneous</em>, and its behavior is undefined.  
<P> 
The third program is correct.  The exact same  
sequence of forty bytes that were loaded from the send buffer will be  
stored in the receive buffer, even  
if sender and receiver run in a different environment.  The message  
sent has exactly the same length (in bytes) and the same binary  
representation as the message received.  If <tt>a</tt> and <tt>b</tt> are  
of different types,  
or if they are of the same type but different data representations are used,  
then the bits stored in the receive buffer may encode values that are  
different from the values they encoded in the send buffer.  
<P> 
Data representation conversion also applies to the <em> envelope</em> of a message:  
source, destination and tag are all integers that may need to be converted.  
<P> 
 
<br> 
<em> Advice  
        to implementors.</em>  
<P> 
The current definition does not require messages to carry data  
type information.  Both sender and receiver provide complete data  
type information.  
In a heterogeneous environment, one can either use  
a machine independent encoding  
such as XDR, or have the receiver convert from the sender representation to its  
own, or even have the sender do the conversion.  
<P> 
Additional type information might be added to messages  
in order to allow the system to detect mismatches between  
datatype at sender and receiver.  
This might be particularly useful in a slower but safer debug mode.  
 (<em> End of advice to implementors.</em>) <br> 
<font face="sans-serif"> MPI</font> requires support for inter-language communication, e.g.,  
if messages are sent  
using an <font face="sans-serif"> MPI</font> procedure from the <font face="sans-serif"> MPI</font> C language interface  
and received  
using an <font face="sans-serif"> MPI</font> procedure from one of the <font face="sans-serif"> MPI</font> Fortran language interfaces.  
The behavior is defined in  
Section <a href="node500.htm#Node500">Language Interoperability</a>.  
<P> 

<P>
<hr>
<a href="node64.htm#Node65"><img width=16 height=16 src="previous.gif" alt="Previous"></a><a href="node63.htm#Node63"><img width=16 height=16 src="up.gif" alt="Up"></a><a href="node67.htm#Node67"><img width=16 height=16 src="next.gif" alt="Next"></a><br>
<b>Up: </b><a href="node63.htm#Node63"> Datatype Matching and Data Conversion</a>
<b>Next: </b><a href="node67.htm#Node67"> Communication Modes</a>
<b>Previous: </b><a href="node64.htm#Node65"> Type <font face="sans-serif"> MPI_CHARACTER</font></a>
<p>
<HR>
Return to <A HREF="node601.htm">MPI-4.1 Standard Index</A><BR>
Return to <A HREF="http://www.mpi-forum.org/index.html">MPI Forum Home Page</A><BR>
<HR>
<FONT SIZE=-1>(Unofficial) MPI-4.1 of November 2, 2023<BR>
HTML Generated on November 19, 2023
</FONT>
</body>
</html>
